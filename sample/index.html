<!DOCTYPE html>
<html>
  <head>
    <title>
      Leaflet Time Data Demo
    </title>
    <link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css">
  	<style>
      body,
      html {
        height: 100%;
      }
      #map {
        width: 99%;
        height: 99%;
     }
    </style>
  </head>
  <body>
  	<div id="map"></div>
    
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <script src='http://mapsarecool.com/maptime2015/boulder_restaurants.geojson'></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
    <script src="http://leaflet.github.io/Leaflet.draw/leaflet.draw.js"></script>
  	<script>

      var colors = {
        'bar': '#8e44ad',
        'cafe': '#e74c3c',
        'pub ': '#16a085',
        'restaurant': '#f1c40f'
      };
      
      var map = L.map('map').setView([40.02, -105.28], 15);

      var popupContent = function(properties) {
        var content = '<div class="popup">' +
          '<span class="title">{{name}}</span><br/>' +
          '{{address}}<br/>' +
          '<hr/>' +
          '<span class="title">Amenity</span>: {{amenity}}<br/>' +
          '<span class="title">Cuisine</span>: {{cuisine}}<br/>' +
          '</div>';
        return Handlebars.compile(content)(properties);
      };
     
      L.tileLayer('http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.png', {
  			type: "sat",
  			maxZoom: 18,
  			attribution: 'OpenStreetMap and MapQuest',
  			subdomains: '1234'
		}).addTo(map);

      L.geoJson(boulderData, {
        pointToLayer: function(feature, latlng) {
          return L.circleMarker(latlng, {
            color: 'white',
            fillColor: colors[feature.properties.amenity],
            fillOpacity: 1,
            radius: 8
          });
        },
        onEachFeature: function(feature, layer) {
          return layer.bindPopup(popupContent(feature.properties));
        }
      }).addTo(map);
  	</script>

  </body>
</html>